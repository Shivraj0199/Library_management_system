{% extends "layout.html" %}
{% block content %}

<style>
  .page-title {
    font-weight: 700;
    color: #2c2f7b;
  }

  .table-container {
    background: #ffffff;
    padding: 25px;
    border-radius: 14px;
    box-shadow: 0px 4px 14px rgba(0, 0, 0, 0.08);
    animation: fadeIn 0.3s ease-in-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .search-box .form-control {
    border-radius: 8px 0 0 8px;
    padding: 10px;
  }

  .search-box .btn {
    border-radius: 0 8px 8px 0;
  }

  table thead tr th {
    background: #f0f3ff;
    color: #2c2f7b;
    font-weight: 600;
  }

  table tbody tr:hover {
    background: #f7f9ff !important;
  }

  .btn-sm {
    padding: 5px 12px;
    border-radius: 6px;
    font-weight: 600;
  }

  .no-data {
    text-align: center;
    font-weight: 600;
    padding: 20px;
    color: #777;
  }
</style>

<!-- Header Section -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="page-title">üìö Books</h3>
  <a class="btn btn-success btn-custom" href="{{ url_for('add_book') }}">‚ûï Add Book</a>
</div>

<!-- Search Box -->
<form class="mb-3 search-box" method="get" action="{{ url_for('search') }}">
  <div class="input-group">
    <input type="text" name="q" class="form-control" placeholder="Search books by title or author...">
    <button class="btn btn-outline-secondary" type="submit">üîç Search</button>
  </div>
</form>

<!-- Table -->
<div class="table-container">

  <table class="table table-hover align-middle">
    <thead>
      <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Author</th>
        <th>Copies</th>
        <th>Year</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      {% for b in books %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ b.title }}</td>
        <td>{{ b.author or '' }}</td>
        <td>{{ b.copies }}</td>
        <td>{{ b.year or '' }}</td>
        <td>
          <a class="btn btn-sm btn-primary me-1" href="{{ url_for('edit_book', id=b.id) }}">‚úè Edit</a>

          <form method="post" action="{{ url_for('delete_book', id=b.id) }}" style="display:inline"
            onsubmit="return confirm('Are you sure you want to delete this book?')">
            <button class="btn btn-sm btn-danger">üóë Delete</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="6" class="no-data">No books found</td>
      </tr>
      {% endfor %}
    </tbody>

  </table>
</div>

{% endblock %}
